# ----------------------------------------------------------------------
# Create tri3 mesh at 200m resolution.
# ----------------------------------------------------------------------

# ----------------------------------------------------------------------
# Generate geometry
# ----------------------------------------------------------------------
playback 'geometry_refine.jou'

# ----------------------------------------------------------------------
# Set discretization size and scheme
# ----------------------------------------------------------------------
surface all size 800
surface all scheme trimesh

# ----------------------------------------------------------------------
# Generate the mesh
# ----------------------------------------------------------------------
mesh surface all

# ----------------------------------------------------------------------
# Refine elements within 1/2 of rupture width
# ----------------------------------------------------------------------
group "refinecells1" add node with x_min >= -24.001e+3 and x_max <= 24.001e+3 and y_min >= -36.001e+3 and y_max <= 36.001e+3
refine node in refinecells1 depth 1
group "refinecells2" add node with x_min >= -12.001e+3 and x_max <= 12.001e+3 and y_min >= -24.001e+3 and y_max <= 24.001e+3
refine node in refinecells2 depth 1

# ----------------------------------------------------------------------
# Smooth mesh to improve quality
# ----------------------------------------------------------------------
surface all smooth scheme laplacian
smooth surface all
surface all smooth scheme condition number beta 1.3 cpu 10
smooth surface all

# ----------------------------------------------------------------------
# Setup boundary conditions.
# ----------------------------------------------------------------------
playback 'createbc.jou'

# ----------------------------------------------------------------------
# Export exodus file
# ----------------------------------------------------------------------
export mesh "tri3_200m_refine.exo" dimension 2 overwrite




