# ----------------------------------------------------------------------
# Create quad4 mesh at 200m resolution.
# ----------------------------------------------------------------------

# ----------------------------------------------------------------------
# Set parameters.
# ----------------------------------------------------------------------
playback 'params.jou'
#{dx=200.0*m}

# ----------------------------------------------------------------------
# Generate geometry
# ----------------------------------------------------------------------
playback 'geometry.jou'

# ----------------------------------------------------------------------
# Set discretization size
# ----------------------------------------------------------------------
surface all scheme pave
playback 'gradient.jou'

# Reset biases to get even number of points in loop required by paving scheme
curve 30 interval 12
curve 14 scheme bias fine size {dxD} coarse size {0.98*dxC} start vertex 11

# ----------------------------------------------------------------------
# Generate the mesh
# ----------------------------------------------------------------------
mesh surface all

# ----------------------------------------------------------------------
# Smooth mesh to improve quality.
# ----------------------------------------------------------------------
surface all smooth scheme condition number beta 1.3 cpu 10
smooth surface all

# ----------------------------------------------------------------------
# Setup boundary conditions.
# ----------------------------------------------------------------------
playback 'createbc.jou'

# ----------------------------------------------------------------------
# Export exodus file
# ----------------------------------------------------------------------
export mesh "quad4_200m_gradient.exo" dimension 2 overwrite




