# ----------------------------------------------------------------------
# Generate geometry
# ----------------------------------------------------------------------
playback 'geometry.jou'

# ----------------------------------------------------------------------
# Set discretization size
# ----------------------------------------------------------------------
volume all scheme tetmesh
volume all size 1000.0

# ----------------------------------------------------------------------
# Generate the mesh
# ----------------------------------------------------------------------
mesh volume all

# ----------------------------------------------------------------------
# Smooth mesh to improve quality
# ----------------------------------------------------------------------
${condnum=2.1}
${loop(5)}
cleanup volume all
volume all smooth scheme condition number beta {condnum} cpu 10
smooth volume all
${condnum=condnum-0.1}
${endloop}

# ----------------------------------------------------------------------
# Generate blocks and nodesets
# ----------------------------------------------------------------------
playback 'createbc.jou'

# ----------------------------------------------------------------------
# Export exodus file
# ----------------------------------------------------------------------
export mesh "reverseslip_tet4_1000m.exo" dimension 3 overwrite
